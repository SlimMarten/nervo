<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Layla</title>
		<script type="text/javascript" src="../build/layla.js"></script>
		<link rel="stylesheet" type="text/css" href="css/styles.css">
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}
		</style>
	</head>
	<body>
		<div class="mesh-container">
				<div class="mesh-void">
						<div class="mesh-column-9 mesh-column-sm-9 mesh-column-md-9 mesh-column-lg-9 mesh-column-xl-9">
							<p>
								<pre class="tween1"></pre>
								<pre class="tween2"></pre>
								<pre class="tween3"></pre>
								<pre class="tween4"></pre>
							</p>
						</div>
						<div class="mesh-column-3 mesh-column-sm-3 mesh-column-md-3 mesh-column-lg-3 mesh-column-xl-3">
						</div>
					</div>
			<div class="mesh-void">
				<div class="mesh-column-12 mesh-column-sm-12 mesh-column-md-12 mesh-column-lg-12 mesh-column-xl-12"></div>
					<h1>Layla</h1>
					<p>Javascript Animation Library</p>
					<section>
						<div style="padding-bottom: calc(9/16* 100%); position: relative;">
							<canvas style="position: absolute; width: 100%;height: 100%; left: 0;"></canvas>
						</div>
					</section>
					<section>
						<h2>Installation</h2>
						<code>npm i git+ssh://git@gitlab.com/slimInteractive/layla.git#master</code>
					</section>
					<section>
						<h2>Usage</h2>
						<code>import * as Layla from 'layla';</code>
					</section>
					<section>
						<h2>Tween</h2>
						<code>const tween = new Layla.Tween(start : {}, end : {}, parameters : {});</code>
						<h3>Start <code>type : {}</code></h3>
						<h3>End <code>type : {}</code></h3>
						<h3>Parameters <code>type : {}</code></h3>
						<ul>
							<li>autoStart <code>boolean</code></li>
							<li>duration <code>float</code></li>
							<li>easing <code>string</code></li>
							<li>loop <code>boolean</code></li>
							<li>onComplete <code>callback function</code></li>
							<li>onProgress <code>callback function</code></li>
							<li>onStart <code>callback function</code></li>
							<li>timeScale <code>float</code></li>
						</ul>
						<h3>Methods</h3>
						<ul>
							<li><code>.pause()</code></li>
							<li><code>.play()</code></li>
							<li><code>.start()</code></li>
							<li><code>.stop()</code></li>
						</ul>
					</section>
					<section>
						<h2>Track</h2>
						<code>const track = new Layla.Track(tweens : [], parameters : {});</code>
						<h3>Tweens <code>type : []</code></h3>
						<h3>Parameters <code>type : {}</code></h3>
						<ul>
							<li>start <code>float</code></li>
							<li>onStart <code>callback function</code></li>
							<li>onProgress <code>callback function</code></li>
							<li>onComplete <code>callback function</code></li>
						</ul>
					</section>
					<section>
						<h2>Timeline</h2>
						<code>const timeline = new Layla.Timeline(tweens : [], parameters : {});</code>
						<h3>Tweens <code>type : []</code></h3>
						<h3>Parameters <code>type : {}</code></h3>
						<ul>
							<li>autoStart <code>boolean</code></li>
							<li>easing <code>string</code></li>
							<li>loop <code>boolean</code></li>
							<li>onComplete <code>callback function</code></li>
							<li>onProgress <code>callback function</code></li>
							<li>onStart <code>callback function</code></li>
							<li>timeScale <code>boolean</code></li>
						</ul>
						<h3>Methods</h3>
						<ul>
							<li><code>.pause()</code></li>
							<li><code>.play()</code></li>
							<li><code>.start()</code></li>
							<li><code>.stop()</code></li>
						</ul>
					</section>
			</div>
		</div>
		<script type="text/javascript">

		const tween1Container = document.querySelector('.tween1');
		const tween2Container = document.querySelector('.tween2');
		const tween3Container = document.querySelector('.tween3');
		const tween4Container = document.querySelector('.tween4');
		const timelineContainer = document.querySelector('.timeline');


		const tween1 = new Layla.Tween({x:0,y:0,z:0},{x:10,y:100,z:1000},{
			autoStart: false,
			duration: 5,
			// loop: true,
			// timeScale: 2,
			// easing: "expoOut",
			onProgress: e => {
				e.target.value.x = Math.round(e.target.value.x * 100) / 100;
				e.target.value.y = Math.round(e.target.value.y * 100) / 100;
				e.target.value.z = Math.round(e.target.value.z * 100) / 100;
				// console.log(e.type + ": " + `${e.id + 1}`, e.target.value);
				tween1Container.innerHTML = JSON.stringify(e.target.value);
			},
			onComplete: e => {
				console.log("Tween 1 finished", e);
			}
		});

		const tween2 = new Layla.Tween({tween2:0},{tween2:10},{
			autoStart: false,
			duration: 5,
			// timeScale: 10,
			onProgress: e => {
				// console.log(e.type + ": " + `${e.id + 1}`, e.target.value);
				e.target.value.tween2 = Math.round(e.target.value.tween2 * 100) / 100;
				tween2Container.innerHTML = JSON.stringify(e.target.value);
			},
			onComplete: e => {
				console.log("Tween 2 finished", e);
			}
		});

		const tween3 = new Layla.Tween({tween3:0},{tween3:1000},{
			autoStart: false,
			duration: 10,
			onProgress: e => {
				// console.log(e.type + ": " + `${e.id + 1}`, e.target.value);
				e.target.value.tween3 = Math.round(e.target.value.tween3 * 100) / 100;
				tween3Container.innerHTML = JSON.stringify(e.target.value);
			},
			onComplete: e => {
				console.log("Tween 3 finished", e);
			}
		});

		const tween4 = new Layla.Tween({tween4:0},{tween4:1000},{
			autoStart: false,
			duration: 5,
			timeScale: 10,
			onProgress: e => {
				// console.log(e.type + ": " + `${e.id + 1}`, e.target.value);
				e.target.value.tween4 = Math.round(e.target.value.tween4 * 100) / 100;
				tween4Container.innerHTML = JSON.stringify(e.target.value);
			},
			onComplete: e => {
				console.log("Tween 4 finished", e);
			}
		});

		const track = new Layla.Track([tween3,tween2],{
			// start: 2,
			onProgress: e => {
				// console.log('Track update',e);
			},
			onComplete: e => {
				// console.log(`Track completed: Track with ID ${e.target.id}`)
			}
		});

		const timeline = new Layla.Timeline([tween1], {
			autoStart: false,
			loop: true,
			// start: 5,
			timeScale: 0.5,
			// easing: "expoIn",
			onProgress: e => {
			},
			onComplete: e => {
				console.log('Timeline Finish');
			}
		});

		timeline.add([tween4, track],{
			start: 10
		});

		document.addEventListener("keydown", function (e){
			switch(e.keyCode){
				case 80:
					if(timeline.isActive){
						timeline.pause();
					}else{
						timeline.play();
					}
					break;
				case 83:
					timeline.start();
					break;
				case 67:
					timeline.stop();
					break;
				case 76:
						timeline.loop = !timeline.loop;
						console.log(timeline.loop);
					break;
			}
		});

		</script>
	</body>
</html>
